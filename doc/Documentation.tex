\documentclass{article}

\usepackage{ifxetex}
\ifxetex
    % XeLaTeX
    \usepackage{polyglossia}
    %\setmainlanguage{english}
    \setdefaultlanguage{english}
    \setkeys{english}{variant=british}
    \setotherlanguage[spelling=new,babelshorthands=true]{german}
    \usepackage{fontspec}
    \usepackage[]{unicode-math}
    %\setmainfont{XITS}
    %\setmathfont{XITS Math}
\else
    % default: pdfLaTeX
	%\usepackage[pdftex]{graphicx}
    \usepackage[british]{babel}
    \usepackage[T1]{fontenc}
    %\usepackage{lmodern}
    \usepackage[adobe-utopia]{mathdesign}
    \usepackage[utf8]{inputenc}
    \usepackage[babel=true]{microtype}
	\selectlanguage{british}
\fi
\input{Bib/package}
\usepackage{listings}
\lstdefinestyle{TeX}{
  breaklines=true,
  frame=simple,
  language=TeX,
}
\lstset{style=TeX}

\usepackage{tikz}
\usetikzlibrary{calc}
\usepackage{../src/tikz-pf}
\begin{document}

\section{TikZ-pf}

Some problem frames provided as examples to show the usage.

\subsection{Context Diagram}

\begin{figure}[htbp]
\centering
\input{Figures/cd}
\caption{{Context Diagram}: Patient Monitoring System (cf.~\cite{Jackson:2001}) \label{fig:cd}}
\end{figure}
\lstinputlisting{Figures/cd.tex}

\subsection{Problem Frames}

\subsubsection{Required Behaviour}
\begin{figure}[htbp]
\centering
\input{Figures/rb}
\caption{{Required Behaviour} {Problem Frame} (cf.~\cite{Jackson:2001}) \label{fig:rb}}
\end{figure}
\lstinputlisting{Figures/rb.tex}

\subsubsection{Commanded Behaviour}
\begin{figure}[htbp]
\centering
\input{Figures/cb}
\caption{{Commanded Behaviour} {Problem Frame} (cf.~\cite{Jackson:2001}) \label{fig:cb}}
\end{figure}
\lstinputlisting{Figures/cb.tex}

\subsubsection{Commanded Information}
\begin{figure}[htbp]
\centering
\input{Figures/ci}
\caption{{Commanded Information} {Problem Frame} (cf.~\cite{Jackson:2001}) \label{fig:ci}}
\end{figure}
\lstinputlisting{Figures/ci.tex}

\subsubsection{Simple Workpiece}
\begin{figure}[htbp]
\centering
\input{Figures/sw}
\caption{{Simple Workpiece} {Problem Frame} (cf.~\cite{Jackson:2001}) \label{fig:sw}}
\end{figure}
\lstinputlisting{Figures/sw.tex}

\subsubsection{Transformation}
\begin{figure}[htbp]
\centering
\input{Figures/t}
\caption{{Transformation} {Problem Frame} (cf.~\cite{Jackson:2001}) \label{fig:t}}
\end{figure}
\lstinputlisting{Figures/t.tex}

\input{Bib/index}

\end{document}

